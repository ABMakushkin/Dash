# Полное руководство по модулю Python StringIO с примерами
2024-09-11
#python 
[Complete Guide to Python StringIO Module with Examples (turbopages.org)](https://translated.turbopages.org/proxy_u/en-ru.ru.47e304fd-66e196bb-e53f477b-74722d776562/https/www.tutorialspoint.com/complete-guide-to-python-stringio-module-with-examples)


## Пример не из статьи
bytes_data = b'date,"total revenue"\n2018-06-19,12.65\n2018-06-20,3.90\n2018-06-21,6.16\n2018-06-22,9.06\n2018-06-23,1.30\n2018-06-24,1.88\n2018-06-25,4.20\n2018-06-26,2.46\n2018-06-27,2.38\n2018-06-28,1.06\n'
s=str(bytes_data,'utf-8')
data = StringIO(s)
df=pd.read_csv(data)
df
![[Pasted image 20240911163957.png]]


import pandas as pd
from io import StringIO
'# Sample bytes data
bytes_data = b'Name,Age,Occupation\nJohn,25,Engineer\nAlice,30,Doctor\nBob,28,Artist'
'# Convert bytes to string and then to DataFrame
data_str = bytes_data.decode('utf-8')
df_method1 = pd.read_csv(StringIO(data_str))
'# Display the DataFrame
print(df_method1)


![[Pasted image 20240911164240.png]]

-----==============
Иногда нам нужны данные для создания или чтения в памяти вместо реальных файлов, которые видит операционная система. Здесь в игру вступает модуль Python StringIO, файлоподобный объект в памяти. Прочтите эту статью, чтобы получить подробное объяснение о модуле Python StringIO.

## Что такое модуль Python StringIO?

Модуль Python StringIO - это файлоподобный объект в памяти, который может использоваться как для ввода, так и для вывода большинства функций, ожидающих получения стандартного файлового объекта. Другими словами, файлоподобный объект действует как обычный файл, позволяя выполнять большинство стандартных операций ввода-вывода файлов.

Одно из важных различий между ними заключается в том, что обычные файлы видны операционной системе, тогда как файловые объекты создаются в памяти и, следовательно, могут обрабатываться более эффективно.

## Установка модуля StringIO

Модуль StringIO включен в модуль ввода-вывода стандартной библиотеки Python, и мы можем использовать приведенную ниже команду для его импорта −

из io import StringIO 

[

Углубленно изучайте **Python** для работы с реальными проектами на нашем **сертификационном курсе Python**. Зарегистрируйтесь и станьте сертифицированным экспертом, чтобы повысить свой карьерный рост.

](https://translated.turbopages.org/proxy_u/en-ru.ru.47e304fd-66e196bb-e53f477b-74722d776562/https/www.tutorialspoint.com/certification/complete-python-prime-pack/index.asp?utm_source=tutorialspoint&utm_medium=python_tutorial_3p&utm_campaign=internal)

## Создание потоков StringIO / файловых объектов

Мы можем создать поток StringIO или файловые объекты, передав строку в модуль StringIO(). Давайте разберемся в этом на приведенном ниже примере −

из ввода-вывода import StringIO String_doc = "Добро пожаловать в Tutorialspoint". Object_string = StringIO(String_doc)

В приведенном выше примере мы создали объект StringIO с именем Object_string, передав string-тип String_doc.

## Чтение данных из объекта StringIO

Мы можем использовать функцию read() для чтения данных из объекта StringIO. Ниже приведены несколько соответствующих строк кода −

### Пример

(напечататьObject_string.прочитать())

### Вывод

Результатом будет −

Добро пожаловать на сайт Tutorialspoint.

## Запись данных в объект StringIO

Мы можем использовать функцию write() для записи данных в объект StringIO. Ниже приведены несколько соответствующих строк кода −

### Пример

Object_string.написать(" Веб-сайт является www.tutorialspoint.com.")
# убедившись, что поток / файл objcet считывается с начала Object_string.seek(0) 
print(Object_string.read())

### Вывод

Результатом будет −

Добро пожаловать на Tutorialspoint. Веб-сайт - это www.tutorialspoint.com.

## Важные методы StringIO

Некоторые из важных методов StringIO вместе с примерами кодов приведены ниже −

### StringIO.getvalue()

Как следует из названия, эта функция возвращает все содержимое файла. Вот синтаксис этой функции −

Имя_файла.получить значение()

### Пример

Открыть компилятор

из ввода-вывода импортируем StringIO # Произвольную строку Object_string ="Добро пожаловать в TutorialsPoint".

# Используя метод StringIO для установки в качестве объекта file file_module = StringIO(Object_string)

# Извлекаем все содержимое файла
print(file_module.получаем значение())

### Вывод

Он выдаст следующий результат −

Добро пожаловать на сайт TutorialsPoint.

### StringIO.seek()

Эта функция используется для установки положения курсора в файле. После выполнения любых операций чтения и записи курсор устанавливается на последний индекс. Теперь, чтобы переместить курсор в начальный индекс файла, мы можем использовать функцию seek().

Вот синтаксис функции seek() −

Имя_файла.искать(аргумент)

Здесь аргумент укажет функции, где установить положение курсора.

### Пример

Открыть компилятор

из ввода-вывода import StringIO Object_string ="Добро пожаловать в TutorialsPoint". file_module = StringIO(Object_string)

# Чтение файла
print(file_module.read())

# Но теперь, если вы захотите прочитать из файла еще раз, 
# он покажет пустой файл, потому что курсор 
# установлен на последний индекс файла.
# Приведенный ниже код вернет пустую строку и ничего не напечатает.
print(file_module.read())
# Теперь, чтобы установить положение курсора при запуске и снова прочитать / записать файл,
# мы можем использовать функцию seek(). Нам также нужно передать аргумент. file_module.seek(0)

# Теперь мы можем снова прочитать файл
print(file_module.read())

### Вывод

Приведенный выше пример даст следующий результат −

Добро пожаловать на сайт TutorialsPoint.

### StringIO.truncate()

Как следует из названия, эта функция изменяет размер файлового потока. Она удаляет файл с заданным индексом и также сохраняет его.

Вот синтаксис функции truncate() −

Имя_файла.усечь(размер = Нет)

Вы можете указать размер, из которого будет выполняться усечение файла.

### Пример

Открыть компилятор

из ввода-вывода import StringIO Object_string ="Добро пожаловать в TutorialsPoint". file_module = StringIO(Object_string)

# Чтение файла
print(file_module.read())

# Теперь установим курсор на 0. file_module.seek(0)

# Теперь отбросим файл с индексом 10. файл_модуля.truncate(10)

# Теперь мы можем снова прочитать файл после усечения
print(file_module.read())

### Вывод

Он выдаст следующий результат −

Добро пожаловать на TutorialsPoint.
Добро пожаловать на

### StringIO.tell()

Эта функция сообщает нам текущее положение курсора в файле. Ниже приведен синтаксис функции tell() −

Имя_файла.скажите()

### Пример

Открыть компилятор

из ввода-вывода import StringIO Object_string ="Добро пожаловать в TutorialsPoint". file_module = StringIO(Object_string)

# Текущая позиция курсора равна 0
print(file_module.скажите())

# Теперь установите курсор на 10. file_module.seek(10)

# Выведите индекс курсора 
print(file_module.скажите())

### Вывод

Он выдаст следующий результат −

0
10

### StringIO.close()

Эта функция закрывает файл, и после ее применения мы не можем выполнять какие-либо дальнейшие операции с этим файлом. Если вы попытаетесь выполнить какую-либо операцию, это вызовет ValueError.

Вот синтаксис функции close() −

Имя_файла.закрыть()

### Пример

Открыть компилятор

из
# Импорт модуля StringIO io import StringIO # Произвольная строка Object_string ="Добро пожаловать в TutorialsPoint".

# Использование метода StringIO для установки в качестве объекта файла file_module = StringIO(Object_string)

# Чтение файла
print(file_module.чтение())

# Закрытие файла file_module.закрыть ()

# Попробуем прочитать файл еще раз
print(file_module.read())

### Вывод

Он выдаст следующий результат −

Добро пожаловать на TutorialsPoint.
-----------------------------------------------------------------------
Обратная трассировка ValueError (последний вызов last)
<ipython-input-5-3c3241cbedca> в <модуле>
 10 file_module.close()
 11 # Чтение файла
---> 12 печать(file_module.read())

ValueError: операция ввода-вывода над закрытым файлом

## Функции StringIO возвращаемого типа Boolean

Здесь мы обсудим некоторые методы StringIO, возвращающие логические значения, т.Е. True или False −

### StringIO.isatty()

Эта логическая функция вернет значение True, если файловый объект является интерактивным, в противном случае вернет значение False. Вот синтаксис функции isatty() −

Имя_файла.isatty()

### Пример

Открыть компилятор

из
# Импорт модуля StringIO io import StringIO # Произвольная строка Object_string ="Добро пожаловать в TutorialsPoint".

# Использование метода StringIO для установки в качестве файлового объекта file_module = StringIO(Object_string)

# Он вернет True, если файл интерактивный 
# и False, если файл не интерактивный.
print("Является ли объект file интерактивным?", file_module.isatty())

### Вывод

Он выдаст следующий результат −

Является ли поток файлов интерактивным? False

### StringIO.readable()

Эта логическая функция вернет значение True, если файловый объект доступен для чтения, и возвращает значение False, если файловый объект недоступен для чтения. Ниже приведен синтаксис функции readable() −

Имя_файла.читаемый()

### Пример

Открыть компилятор

из ввода-вывода import StringIO Object_string ="Добро пожаловать в TutorialsPoint". file_module = StringIO(Object_string)

# Он вернет True, если файл доступен для чтения, и 
# False, если файл недоступен для чтения.
print("Доступен ли для чтения файл?", file_module.readable())

### Вывод

Он выдаст следующий результат −

Доступен ли файл для чтения? Верно

### StringIO.writable()

Эта логическая функция вернет True, если файловый объект доступен для записи, и возвращает False, если файловый объект недоступен для записи.

Вот синтаксис функции writable() −

Имя_файла.доступно для записи()

### Пример

Открыть компилятор

из ввода-вывода import StringIO Object_string ="Добро пожаловать в TutorialsPoint". file_module = StringIO(Object_string)

# Он вернет True, если файл доступен для записи, и 
# False, если файл недоступен для записи.
print("Доступен ли файл для записи?", file_module.доступно для записи())

### Вывод

Он выдаст следующий результат −

Доступен ли для записи файл? True

### StringIO.seekable()

Эта логическая функция вернет True, если файловый объект поддерживает произвольный доступ, и вернет False, если файловый объект не поддерживает произвольный доступ.

Вот синтаксис функции seekable() −

Имя_файла.доступно для поиска()

### Пример

Открыть компилятор

из ввода-вывода import StringIO Object_string ="Добро пожаловать в TutorialsPoint". file_module = StringIO(Object_string)

# Он вернет True, если файловый объект поддерживает произвольный доступ, и 
# False, если файловый объект не поддерживает произвольный доступ.
print("Доступен ли поиск файла?", file_module.доступно для поиска())

### Вывод

Он выдаст следующий результат −

Доступен ли поиск файла? Верно

### StringIO.закрыто

Эта логическая функция вернет True, если файловый объект закрыт, и возвращает False, если файловый объект открыт.

### Пример

Открыть компилятор

из
# Импорт модуля StringIO io import StringIO # Произвольная строка Object_string ="Добро пожаловать в TutorialsPoint".

# Использование метода StringIO для установки в качестве файлового объекта file_module = StringIO(Object_string)

# Он вернет True, если файловый объект поддерживает произвольный доступ 
# и False, если файловый объект не поддерживает произвольный доступ.
print("Файл закрыт?", file_module.closed)

### Вывод

Он выдаст следующий результат −

Файл закрыт? False

## Заключение

Мы изучили модуль StringIO на Python, который является полезным инструментом для работы с потоками ввода и вывода на основе строк. Это позволяет нам создавать файлоподобный объект, который может использоваться в качестве входных или выходных данных для различных функций, и может быть легко прочитан или записан с помощью методов write() и read().

Одним из основных преимуществ использования StringIO является то, что он позволяет вам работать со строками аналогично тому, как вы работали бы с файлами. Это может быть особенно полезно, когда вам нужно прочитать строку или записать ее, но вы не хотите создавать временный файл на диске.

Еще одним преимуществом StringIO является его высокая эффективность, поскольку данные хранятся в памяти, а не на диске. Это может ускорить процесс по сравнению с использованием физического файла, особенно для небольших объемов данных.

В целом, StringIO - полезный и эффективный инструмент для работы с потоками ввода и вывода на основе строк в Python. Он прост в использовании и может быть удобной альтернативой работе с физическими файлами. Мы также разобрали несколько вариантов использования, в которых модуль Python StringIO и его методы эффективно обрабатывают файловые пот